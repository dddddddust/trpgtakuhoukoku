<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å“å ±å‘Šãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    textarea { width: 100%; height: 200px; margin-top: 10px; }
    .section { margin-bottom: 20px; }
    .label { display: block; margin-top: 5px; }
    input[type=text], select { width: 100%; padding: 5px; }
    .radio-group { margin-top: 5px; }
    .char-count { font-size: 12px; color: gray; text-align: right; }
    .char-count.over { color: red; }
  </style>
</head>
<body>
  <h1>å“å ±å‘Šãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>
  <div class="section">
    <label class="label">ã‚·ã‚¹ãƒ†ãƒ :</label>
    <div class="radio-group">
      <label><input type="radio" name="system" value="ã‚¯ãƒˆã‚¥ãƒ«ãƒ•ç¥è©±TRPG">ã‚¯ãƒˆã‚¥ãƒ«ãƒ•ç¥è©±TRPG</label>
      <label><input type="radio" name="system" value="æ–°ã‚¯ãƒˆã‚¥ãƒ«ãƒ•ç¥è©±TRPG">æ–°ã‚¯ãƒˆã‚¥ãƒ«ãƒ•ç¥è©±TRPG</label>
      <label><input type="radio" name="system" value="other">ãã®ä»–</label>
      <input type="text" id="systemOther" placeholder="ã‚·ã‚¹ãƒ†ãƒ åï¼ˆã€Œãã®ä»–ã€ã‚’é¸æŠã—ãŸå ´åˆå…¥åŠ›ã—ã¾ã™ï¼‰" disabled>
    </div>
  </div>

  <div class="section">
    <label class="label">ã‚·ãƒŠãƒªã‚ª:</label>
    <div class="radio-group">
      <label><input type="radio" name="scenarioFrame" value="ã€Œã€">ã€Œã€</label>
      <label><input type="radio" name="scenarioFrame" value="ã€ã€">ã€ã€</label>
      <label><input type="radio" name="scenarioFrame" value="ã€ã€‘">ã€ã€‘</label>
      <label><input type="radio" name="scenarioFrame" value="â”€â”€â”€â”€â”€â”€">â”€â”€â”€â”€â”€â”€</label>
      <label><input type="radio" name="scenarioFrame" value="â—¤â—¢">â—¤ã€€â—¢</label>
      <label><input type="radio" name="scenarioFrame" value="â•‹â”â”â”â”â”â”â”â”">â•‹â”â”â”â”â”â”â”â”</label>
      <label><input type="radio" name="scenarioFrame" value="ï¼Šâ”€â”€â”€â”€â”€â”€â”€">ï¼Šâ”€â”€â”€â”€â”€â”€â”€</label>
      <label><input type="radio" name="scenarioFrame" value="â€¢â€¢â”ˆâ”ˆâ”ˆâ”ˆ">â€¢â€¢â”ˆâ”ˆâ”ˆâ”ˆ</label>
      <label><input type="radio" name="scenarioFrame" value="âœ¼â€¢â€¢â”ˆâ”ˆâ”ˆâ€¢â€¢âœ¼â€¢â€¢â”ˆâ”ˆâ”ˆâ€¢â€¢âœ¼">âœ¼â€¢â€¢â”ˆâ”ˆâ”ˆâ€¢â€¢âœ¼â€¢â€¢â”ˆâ”ˆâ”ˆâ€¢â€¢âœ¼</label>
      <label><input type="radio" name="scenarioFrame" value="âœ¦âŠ¹">âœ¦ âŠ¹ ï½¡ ï¾ŸË– âœ§ âŠ¹ ï½¡ ï¾Ÿâ– Â°âœ¦ âŠ¹ ï½¡ ï¾ŸË– âœ§</label>
      <label><input type="radio" name="scenarioFrame" value="â–¹â–¸">â–¹â–¸ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼â–¹â–¸</label>
      <label><input type="radio" name="scenarioFrame" value="ï¼ï¼ï¼ï¼ï¼ï¼">ï¼ï¼ï¼ï¼ï¼ï¼</label>
      <label><input type="radio" name="scenarioFrame" value="â–¼â–³â–¼â–³â–¼â–³â–¼â–³â–¼â–³â–¼â–³">â–¼â–³â–¼â–³â–¼â–³â–¼â–³â–¼â–³â–¼â–³</label>
      <label><input type="radio" name="scenarioFrame" value="â˜†.ï½¡:ï½¥â˜….ï½¡:*ï½¥">â˜†.ï½¡:ï½¥â˜….ï½¡:*ï½¥</label>
      <label><input type="radio" name="scenarioFrame" value="oâ—‹oã€‚.ã€‚oâ—‹oã€‚.ã€‚oâ—‹o">oâ—‹oã€‚.ã€‚oâ—‹oã€‚.ã€‚oâ—‹o</label>
      <label><input type="radio" name="scenarioFrame" value="âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’">âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’</label>
      <label><input type="radio" name="scenarioFrame" value="à¬˜â™¡à¬“*:ã‚š+ï½¡.à»’ê’±Â°*à¬˜â™¡à¬“">à¬˜â™¡à¬“*:ã‚š+ï½¡.à»’ê’±Â°*à¬˜â™¡à¬“</label>
    </div>
    <input type="text" id="scenarioName" placeholder="ã‚·ãƒŠãƒªã‚ªå">
  </div>

  <div class="section">
    <label class="label">é€²è¡Œ:</label>
    <div class="radio-group">
      <label><input type="radio" name="role" value="KP">KP</label>
      <label><input type="radio" name="role" value="GM">GM</label>
      <label><input type="radio" name="role" value="other">ãã®ä»–</label>
      <input type="text" id="roleOther" placeholder="é€²è¡Œå½¹åï¼ˆã€Œãã®ä»–ã€ã‚’é¸æŠã—ãŸå ´åˆå…¥åŠ›ã—ã¾ã™ï¼‰" disabled>
    </div>
    <input type="text" id="roleName" placeholder="é€²è¡Œãƒãƒ³ãƒ‰ãƒ«ãƒãƒ¼ãƒ ">
  </div>

  <div class="section">
    <label class="label">PC/HO/PLï¼ˆæœ€å¤§4äººã¾ã§ï¼‰:</label>
    <div id="players"></div>
  </div>

  <div class="section">
    <label class="label">ã‚¨ãƒ³ãƒ‰å:</label>
    <div class="radio-group">
      <label><input type="radio" name="ending" value="END1">END1</label>
      <label><input type="radio" name="ending" value="END2">END2</label>
      <label><input type="radio" name="ending" value="END3">END3</label>
      <label><input type="radio" name="ending" value="END A">END A</label>
      <label><input type="radio" name="ending" value="END B">END B</label>
      <label><input type="radio" name="ending" value="END C">END C</label>
      <label><input type="radio" name="ending" value="other">ãã®ä»–</label>
      <input type="text" id="endingOther" placeholder="ã‚¨ãƒ³ãƒ‰åï¼ˆã€Œãã®ä»–ã€ã‚’é¸æŠã—ãŸå ´åˆå…¥åŠ›ã—ã¾ã™ï¼‰" disabled>
    </div>
  </div>

  <div class="section">
    <label class="label">ãƒ•ã‚©ãƒ³ãƒˆ:</label>
    <div class="radio-group">
      <label><input type="radio" name="font" value="normal">PCï¼PL</label>
      <label><input type="radio" name="font" value="unicode">â„™â„‚ï¼â„™ğ•ƒ</label>
      <label><input type="radio" name="font" value="square">ğŸ…ŸğŸ…’ï¼ğŸ…ŸğŸ…›</label>
      <label><input type="radio" name="font" value="bold">ğ™‹ğ˜¾ï¼ğ™‹ğ™‡</label>
      <label><input type="radio" name="font" value="small">á´˜á´„ï¼á´˜ÊŸ</label>
      <label><input type="radio" name="font" value="circled">ğŸ…¿ğŸ…²ï¼ğŸ…¿ğŸ…»</label>
      <label><input type="radio" name="font" value="serif">ğ™¿ğ™²ï¼ğ™¿ğ™»</label>
      <label><input type="radio" name="font" value="script">ğ“Ÿğ“’ï¼ğ“Ÿğ“›</label>
      <label><input type="radio" name="font" value="superscript">á´¾á¶œï¼á´¾á´¸</label>
    </div>
  </div>

  <div class="section">
    <label class="label">ç”Ÿé‚„ãƒ»ãƒ­ã‚¹ãƒˆ:</label>
    <div class="radio-group">
      <label><input type="radio" name="result" value="ä¸¡ç”Ÿé‚„">ä¸¡ç”Ÿé‚„</label>
      <label><input type="radio" name="result" value="å…¨ç”Ÿé‚„">å…¨ç”Ÿé‚„</label>
      <label><input type="radio" name="result" value="ä¸¡ãƒ­ã‚¹ãƒˆ">ä¸¡ãƒ­ã‚¹ãƒˆ</label>
      <label><input type="radio" name="result" value="å…¨ãƒ­ã‚¹ãƒˆ">å…¨ãƒ­ã‚¹ãƒˆ</label>
      <label><input type="radio" name="result" value="other">ãã®ä»–</label>
      <input type="text" id="resultOther" placeholder="çµæœè©³ç´°ï¼ˆã€Œãã®ä»–ã€ã‚’é¸æŠã—ãŸå ´åˆå…¥åŠ›ã—ã¾ã™ï¼‰" disabled>
    </div>
  </div>

  <div class="section">
    <label class="label">ã‚³ãƒ¡ãƒ³ãƒˆ:</label>
    <input type="text" id="comment" placeholder="æ„Ÿæƒ³ã‚„ã‚³ãƒ¡ãƒ³ãƒˆ">
  </div>

  <button onclick="generate()">ç”Ÿæˆ</button>

  <textarea id="output" readonly></textarea>
  <div id="charCount" class="char-count">æ–‡å­—æ•°ï¼š0å­—</div>

  <script>
    const playersDiv = document.getElementById('players');
    for (let i = 1; i <= 4; i++) {
      playersDiv.innerHTML += `
        <div class="player">
          <label class="label">PC${i}ï¼š</label><input type="text" id="pc${i}">
          <label class="label">HO${i}ï¼š</label><input type="text" id="ho${i}">
          <label class="label">PL${i}ï¼š</label><input type="text" id="pl${i}">
        </div><br>`;
    }

    ['system', 'role', 'ending', 'result'].forEach(name => {
      document.querySelectorAll(`input[name=${name}]`).forEach(r => {
        r.addEventListener('change', () => {
          document.getElementById(name + 'Other').disabled = r.value !== 'other';
        });
      });
    });

    function decorateScenario(frame, name) {
      switch (frame) {
        case 'ã€Œã€': return `ã€€ã€€ã€Œ${name}ã€`;
        case 'ã€ã€': return `ã€€ã€€ã€${name}ã€`;
        case 'ã€ã€‘': return `ã€€ã€€ã€${name}ã€‘`;
        case 'â”€â”€â”€â”€â”€â”€': return `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nã€€ã€€${name}\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`;
        case 'â—¤â—¢': return `ã€€ã€€â—¤ã€€${name}ã€€â—¢`;
        case 'â•‹â”â”â”â”â”â”â”â”': return `â•‹â”â”â”â”â”â”â”â”\nã€€ã€€${name}\nã€€ã€€ã€€ã€€ã€€ã€€â”â”â”â”â”â”â”â”â•‹`;
        case 'ï¼Šâ”€â”€â”€â”€â”€â”€â”€': return `ï¼Šâ”€â”€â”€â”€â”€â”€â”€\nã€€ã€€${name}\nã€€ã€€ã€€ã€€ã€€ã€€â”€â”€â”€â”€â”€â”€â”€ï¼Š`;
        case 'â€¢â€¢â”ˆâ”ˆâ”ˆâ”ˆ': return `â€¢â€¢â”ˆâ”ˆâ”ˆâ”ˆ\nã€€ã€€${name}\nã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€â”ˆâ”ˆâ”ˆâ”ˆâ€¢â€¢`;
        case 'âœ¼â€¢â€¢â”ˆâ”ˆâ”ˆâ€¢â€¢âœ¼â€¢â€¢â”ˆâ”ˆâ”ˆâ€¢â€¢âœ¼': return `ã€€ã€€âœ¼â€¢â€¢â”ˆâ”ˆâ”ˆâ€¢â€¢âœ¼â€¢â€¢â”ˆâ”ˆâ”ˆâ€¢â€¢âœ¼\nã€€ã€€ã€€${name}\nã€€ã€€âœ¼â€¢â€¢â”ˆâ”ˆâ”ˆâ€¢â€¢âœ¼â€¢â€¢â”ˆâ”ˆâ”ˆâ€¢â€¢âœ¼`;
        case 'âœ¦âŠ¹': return `ã€€ã€€âœ¦ âŠ¹ ï½¡ ï¾ŸË– âœ§ âŠ¹ ï½¡ ï¾Ÿâ– Â°âœ¦ âŠ¹ ï½¡ ï¾ŸË– âœ§\nã€€ã€€ã€€${name}\nã€€ã€€âœ¦ âŠ¹ ï½¡ ï¾ŸË– âœ§ âŠ¹ ï½¡ ï¾Ÿâ– Â°âœ¦ âŠ¹ ï½¡ ï¾ŸË– âœ§`;
        case 'â–¹â–¸': return `ã€€ã€€â–¹â–¸ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼â–¹â–¸\nã€€ã€€ã€€${name}\nã€€ã€€â–¹â–¸ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼â–¹â–¸`;
        case 'ï¼ï¼ï¼ï¼ï¼ï¼': return `ã€€ã€€ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼\nã€€ã€€ã€€${name}\nã€€ã€€ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼`;
        case 'â–¼â–³â–¼â–³â–¼â–³â–¼â–³â–¼â–³â–¼â–³': return `ã€€ã€€â–¼â–³â–¼â–³â–¼â–³â–¼â–³â–¼â–³â–¼â–³â–¼â–³â–¼\nã€€ã€€ã€€${name}\nã€€ã€€â–¼â–³â–¼â–³â–¼â–³â–¼â–³â–¼â–³â–¼â–³â–¼â–³â–¼`;
        case 'â˜†.ï½¡:ï½¥â˜….ï½¡:*ï½¥': return `ã€€ã€€â˜†.ï½¡:ï½¥â˜….ï½¡:*ï½¥â˜†.ï½¡:*ï½¥\nã€€ã€€ã€€${name}\nã€€ã€€ï½¡:*ï½¥â˜….ï½¡:*ï½¥â˜†.ï½¡â˜†.ï½¡`;
        case 'oâ—‹oã€‚.ã€‚oâ—‹oã€‚.ã€‚oâ—‹o': return `ã€€ã€€oâ—‹oã€‚.ã€‚oâ—‹oã€‚.ã€‚oâ—‹o\nã€€ã€€ã€€${name}\nã€€ã€€oâ—‹oã€‚.ã€‚oâ—‹oã€‚.ã€‚oâ—‹o`;
        case 'âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’': return `ã€€ã€€âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’\nã€€ã€€ã€€${name}\nã€€ã€€âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’âŒ’`;
        case 'à¬˜â™¡à¬“*:ã‚š+ï½¡.à»’ê’±Â°*à¬˜â™¡à¬“': return `ã€€ã€€à¬˜â™¡à¬“*:ã‚š+ï½¡.à»’ê’±Â°*à¬˜â™¡à¬“\nã€€ã€€ã€€${name}\nã€€ã€€à¬˜â™¡à¬“*:ã‚š+ï½¡.à»’ê’±Â°*à¬˜â™¡à¬“`;
        default: return name;
      }
    }

    function transformText(text, font) {
      switch (font) {
        case 'unicode':
          return text.replace(/KP/g, 'ğ•‚â„™').replace(/GM/g, 'ğ”¾ğ•„').replace(/PC/g, 'â„™â„‚').replace(/PL/g, 'â„™ğ•ƒ').replace(/HO(\d)/g, 'â„ğ•†$1').replace(/(\d)/g, (match, digit) => {
            const unicodeDigits = ['ğŸ˜', 'ğŸ™', 'ğŸš', 'ğŸ›', 'ğŸœ', 'ğŸ', 'ğŸ', 'ğŸŸ', 'ğŸ ', 'ğŸ¡'];
            return unicodeDigits[parseInt(digit)];
          });
        case 'square':
          return text.replace(/KP/g, 'ğŸ…šğŸ…Ÿ').replace(/GM/g, 'ğŸ…–ğŸ…œ').replace(/PC/g, 'ğŸ…ŸğŸ…’').replace(/PL/g, 'ğŸ…ŸğŸ…›').replace(/HO(\d)/g, 'ğŸ…—ğŸ…$1').replace(/(\d)/g, (match, digit) => {
            const circledDigits = ['â“ª', 'â¶', 'â·', 'â¸', 'â¹', 'âº', 'â»', 'â¼', 'â½', 'â¾'];
            return circledDigits[parseInt(digit)];
          });
        case 'bold':
          return text.replace(/KP/g, 'ğ™†ğ™‹').replace(/GM/g, 'ğ™‚ğ™ˆ').replace(/PC/g, 'ğ™‹ğ˜¾').replace(/PL/g, 'ğ™‹ğ™‡').replace(/HO(\d)/g, 'ğ™ƒğ™Š$1');
        case 'small':
          return text.replace(/KP/g, 'á´‹á´˜').replace(/GM/g, 'É¢á´').replace(/PC/g, 'á´˜á´„').replace(/PL/g, 'á´˜ÊŸ').replace(/HO(\d)/g, 'Êœá´$1').replace(/(\d)/g, (match, digit) => {
            return digit;
          });
        case 'circled':
          return text.replace(/KP/g, 'ğŸ…ºğŸ…¿').replace(/GM/g, 'ğŸ…¶ğŸ…¼').replace(/PC/g, 'ğŸ…¿ğŸ…²').replace(/PL/g, 'ğŸ…¿ğŸ…»').replace(/HO(\d)/g, 'ğŸ…·ğŸ…¾$1').replace(/(\d)/g, (match, digit) => {
            const enclosedDigits = ['0âƒ£', '1âƒ£', '2âƒ£', '3âƒ£', '4âƒ£', '5âƒ£', '6âƒ£', '7âƒ£', '8âƒ£', '9âƒ£'];
            return enclosedDigits[parseInt(digit)];
          });
        case 'serif':
          return text.replace(/KP/g, 'ğ™ºğ™¿').replace(/GM/g, 'ğ™¶ğ™¼').replace(/PC/g, 'ğ™¿ğ™²').replace(/PL/g, 'ğ™¿ğ™»').replace(/HO(\d)/g, 'ğ™·ğ™¾$1').replace(/(\d)/g, (match, digit) => {
            const serifDigits = ['ğŸ¶', 'ğŸ·', 'ğŸ¸', 'ğŸ¹', 'ğŸº', 'ğŸ»', 'ğŸ¼', 'ğŸ½', 'ğŸ¾', 'ğŸ¿'];
            return serifDigits[parseInt(digit)];
          });
        case 'script':
          return text.replace(/KP/g, 'ğ“šğ“Ÿ').replace(/GM/g, 'ğ“–ğ“œ').replace(/PC/g, 'ğ“Ÿğ“’').replace(/PL/g, 'ğ“Ÿğ“›').replace(/HO(\d)/g, 'ğ“—ğ“$1').replace(/(\d)/g, (match, digit) => {
            return digit;
          });
        case 'superscript':
          return text.replace(/KP/g, 'á´·á´¾').replace(/GM/g, 'á´³á´¹').replace(/PC/g, 'á´¾á¶œ').replace(/PL/g, 'á´¾á´¸').replace(/HO(\d)/g, 'á´´á´¼$1').replace(/(\d)/g, (match, digit) => {
            const superscriptDigits = ['â°', 'Â¹', 'Â²', 'Â³', 'â´', 'âµ', 'â¶', 'â·', 'â¸', 'â¹'];
            return superscriptDigits[parseInt(digit)];
          });
        case 'normal':
        default:
          return text;
      }
    }

    function generate() {
      const system = document.querySelector('input[name=system]:checked')?.value;
      const systemText = system === 'other' ? document.getElementById('systemOther').value : system || '';
      const scenarioFrame = document.querySelector('input[name=scenarioFrame]:checked')?.value || '';
      const scenarioName = document.getElementById('scenarioName').value || '';
      const roleType = document.querySelector('input[name=role]:checked')?.value;
      const roleLabel = roleType === 'other' ? document.getElementById('roleOther').value : roleType || '';
      const roleName = document.getElementById('roleName').value;
      const font = document.querySelector('input[name=font]:checked')?.value || 'normal';

      let output = '';
      if (systemText) output += systemText + "\n";
      if (scenarioName) output += decorateScenario(scenarioFrame, scenarioName) + "\n\n";

      let roleOutput = `${roleLabel}ï¼š${roleName}`;
      roleOutput = transformText(roleOutput, font);
      if (roleLabel && roleName) output += `${roleOutput}\n\n`;

      let pcLines = [];
      let plLines = [];
      let pcplLines = [];

      for (let i = 1; i <= 4; i++) {
        const ho = document.getElementById(`ho${i}`).value;
        const hoLabel = ho ? `HO${ho}` : `HO${i}`;
        const pc = document.getElementById(`pc${i}`).value;
        const pl = document.getElementById(`pl${i}`).value;

        if (pc && pl) {
          pcplLines.push(`ã€€${hoLabel}ã€€${pc}ï¼${pl}`);
        } else if (pc) {
          pcLines.push(`ã€€${hoLabel}ã€€${pc}`);
        } else if (pl) {
          plLines.push(`ã€€${hoLabel}ã€€${pl}`);
        }
      }

      let pcplLabel = "PCï¼PLï¼š";
      let pcLabel = "PCï¼š";
      let plLabel = "PLï¼š";

      if (font !== 'normal') {
        pcplLabel = transformText(pcplLabel, font);
        pcLabel = transformText(pcLabel, font);
        plLabel = transformText(plLabel, font);

        for (let i = 0; i < pcplLines.length; i++) {
          pcplLines[i] = transformText(pcplLines[i], font);
        }
        for (let i = 0; i < pcLines.length; i++) {
          pcLines[i] = transformText(pcLines[i], font);
        }
        for (let i = 0; i < plLines.length; i++) {
          plLines[i] = transformText(plLines[i], font);
        }
      }

      if (font === 'normal') {
        if (pcplLines.length > 0) {
          output += pcplLabel + "\n";
          for (let i = 0; i < pcplLines.length; i++) {
            const hoNumber = i + 1;
            output += `ã€€HO${hoNumber}ã€€${pcplLines[i].split('ã€€')[2]}\n`;
          }
          output += "\n";
        }
      } else {
        if (pcplLines.length > 0) {
          output += pcplLabel + "\n";
          output += pcplLines.join("\n") + "\n";
        }

        if (pcLines.length > 0) {
          output += pcLabel + "\n";
          output += pcLines.join("\n") + "\n";
        }

        if (plLines.length > 0) {
          output += plLabel + "\n";
          output += plLines.join("\n") + "\n";
        }
      }

      const ending = document.querySelector('input[name=ending]:checked')?.value;
      const endingText = ending === 'other' ? document.getElementById('endingOther').value : ending || '';
      const result = document.querySelector('input[name=result]:checked')?.value;
      const resultText = result === 'other' ? document.getElementById('resultOther').value : result || '';

      if (endingText || resultText) {
        output += "\n";
        if (endingText) output += endingText + "\n";
        if (resultText) output += `ã€€ã€€â”€â”€${resultText}ã«ã¦ã‚·ãƒŠãƒªã‚ªçµ‚äº†\n`;
        else if (endingText) output += `ã€€ã€€â”€â”€${endingText}ã«ã¦ã‚·ãƒŠãƒªã‚ªçµ‚äº†\n`;
      }

      const comment = document.getElementById('comment').value;
      if (comment) output += `\n${comment}`;

      document.getElementById('output').value = output;

      const count = output.length;
      const countElem = document.getElementById('charCount');
      countElem.textContent = `æ–‡å­—æ•°ï¼š${count}å­—`;
      countElem.className = count > 140 ? 'char-count over' : 'char-count';
    }
  </script>
</body>
</html>
